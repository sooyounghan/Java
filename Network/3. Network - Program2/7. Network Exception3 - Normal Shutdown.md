-----
### ë„¤íŠ¸ì›Œí¬ ì˜ˆì™¸3 - ì •ìƒ ì¢…ë£Œ
-----
1. TCPì—ëŠ” 2ê°€ì§€ ì¢…ë¥˜ ì¢…ë£Œ ì¡´ì¬
   - ì •ìƒ ì¢…ë£Œ
   - ê°•ì œ ì¢…ë£Œ

2. ì •ìƒ ì¢…ë£Œ
   - TCPì—ì„œ A, Bê°€ ì„œë¡œ í†µì‹ í•œë‹¤ê³  ê°€ì •
   - TCP ì—°ê²°ì„ ì¢…ë£Œí•˜ë ¤ë©´, ì„œë¡œ FIN ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ì•¼ í•¨
     + A (FIN) â†’ B : Aê°€ Bë¡œ FIN ë©”ì„¸ì§€ë¥¼ ë³´ëƒ„
     + A â† B (FIN) : FIN ë©”ì„¸ì§€ë¥¼ ë°›ì€ Bë„ Aì—ê²Œ FIN ë©”ì„¸ì§€ë¥¼ ë³´ëƒ„

   - socket.close()ë¥¼ í˜¸ì¶œí•˜ë©´ TCPì—ì„œ ì¢…ë£Œì˜ ì˜ë¯¸ì¸ FIN íŒ¨í‚·ì„ ìƒëŒ€ë°©ì—ê²Œ ì „ë‹¬
   - FIN íŒ¨í‚·ì„ ë°›ìœ¼ë©´ ìƒëŒ€ë°©ë„ socket.close()ë¥¼ í˜¸ì¶œí•´ FIN íŒ¨í‚·ì„ ìƒëŒ€ë°©ì—ê²Œ ì „ë‹¬í•´ì•¼ í•¨

<div align="center">
<img src="https://github.com/user-attachments/assets/92fd03ea-a9b7-4f69-a94e-bce82cd426ba">
</div>

  - í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì—°ê²°
  - ì„œë²„ê°€ ì—°ê²° ì¢…ë£Œë¥¼ ìœ„í•´ socket.close() í˜¸ì¶œ : ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì— FIN íŒ¨í‚· ì „ë‹¬
  - í´ë¼ì´ì–¸íŠ¸ëŠ” FIN íŒ¨í‚·ì„ ë°›ìŒ : í´ë¼ì´ì–¸íŠ¸ì˜ OSì—ì„œ FINì— ëŒ€í•œ ACK íŒ¨í‚· ì „ë‹¬ (ACKëŠ” ìš´ì˜ì²´ì œ ë ˆë²¨ì—ì„œ ìë™ ì „ì†¡)
  - í´ë¼ì´ì–¸íŠ¸ë„ ì¢…ë£Œë¥¼ ìœ„í•´ socket.close() í˜¸ì¶œ : í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— FIN íŒ¨í‚· ì „ë‹¬í•˜ë©°, ì„œë²„ì˜ OSëŠ” FIN íŒ¨í‚·ì— ëŒ€í•œ ACK íŒ¨í‚· ì „ë‹¬
  
3. NormalCloseServer (/network/exception/close/normal)
```java
package network.tcp.exception.close.normal;

import util.MyLogger;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import static util.MyLogger.*;

public class NormalCloseServer {
    public static void main(String[] args) throws IOException, InterruptedException {
        ServerSocket serverSocket = new ServerSocket(12345);
        Socket socket = serverSocket.accept();
        log("ì†Œì¼“ ì—°ê²°: " + socket);

        Thread.sleep(1000); // ì—°ê²° í›„ 1ì´ˆ ë™ì•ˆ Sleep
        socket.close(); // í´ë¼ì´ì–¸íŠ¸ì—ê²Œ FIN íŒ¨í‚· ì „ì†¡
        log("ì†Œì¼“ ì¢…ë£Œ");
    }
}
```
  - ì„œë²„ëŠ” ì†Œì¼“ì´ ì—°ê²°ë˜ë©´ 1ì´ˆ ë’¤ì— ì—°ê²° ì¢…ë£Œ
  - ì„œë²„ì—ì„œ socket.close()ë¥¼ í˜¸ì¶œí•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ FIN íŒ¨í‚· ë³´ëƒ„

4. NormalCloseClient
```java
package network.tcp.exception.close.normal;

import util.MyLogger;

import java.io.*;
import java.net.Socket;

import static util.MyLogger.*;

public class NormalCloseClient {
    public static void main(String[] args) throws IOException {
        Socket socket = new Socket("localhost", 12345);

        log("ì†Œì¼“ ì—°ê²°: " + socket);
        InputStream input = socket.getInputStream();

        readByInputStream(input, socket);
        readByBufferedReader(input, socket);
        readByDataInputStream(input, socket);

        log("ì—°ê²° ì¢…ë£Œ: " + socket.isClosed());
    }

    private static void readByInputStream(InputStream input, Socket socket) throws IOException {
        int read = input.read(); // ìƒëŒ€ì¸¡ì—ì„œ ì—°ê²°ì„ ëê²Œ ë˜ë©´, read()ë¥¼ í•  ë•Œì˜ ê°’ì€ -1 (EOF)

        log("read = " + read);

        if(read == -1) { // ì—°ê²° ì¢…ë£Œë˜ë©´,
            input.close(); // ìì› ë‹«ê¸°
            socket.close(); // ì†Œì¼“ ë‹«ê¸° : ìƒëŒ€ë°©ì—ê²Œ FIN íŒ¨í‚· ì „ì†¡
        }
    }


    private static void readByBufferedReader(InputStream input, Socket socket) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(input)); // ë³´ì¡° ìŠ¤íŠ¸ë¦¼ BufferedReaderëŠ” InputStreamReaderë¥¼ ìƒì„±ìë¡œ ë°›ìŒ

        String readString = br.readLine(); // BufferedReaderëŠ” readLine ë©”ì„œë“œ ì‚¬ìš©, ë°˜í™˜ ê°’ String

        log("readString = " + readString);

        if (readString == null) { // readString, ì¦‰ BufferedReaderì˜ ê²½ìš° EOFì— ë‹¤ë‹¤ë¥´ë©´, ê·¸ ê°’ì€ null (ì¦‰, ì—°ê²° ì¢…ë£Œë˜ë©´ null)
            br.close(); // ìì› ë‹«ê¸°
            socket.close(); // ì†Œì¼“ ë‹«ê¸° : ìƒëŒ€ë°©ì—ê²Œ FIN íŒ¨í‚· ì „ì†¡
        }
    }

    private static void readByDataInputStream(InputStream input, Socket socket) throws IOException {
        DataInputStream dis = new DataInputStream(input);

        try {
            dis.readUTF(); // DataInputStreamì€ ì •ìˆ˜, ë¬¸ìì—´ ë“± ë‹¤ì–‘í•˜ê²Œ ì˜¬ ìˆ˜ ìˆìŒ.
            // EOFì— ë‹¤ë‹¤ë¥´ë©´ EOFException ë°œìƒ, ì¦‰ ì—°ê²° ì¢…ë£Œë˜ë©´ EOFException ë°œìƒ
        } catch (EOFException e) {
            log(e);
        } finally {
            dis.close(); // ìì› ë‹«ê¸°
            socket.close(); // ì†Œì¼“ ë‹«ê¸° : ìƒëŒ€ë°©ì—ê²Œ FIN íŒ¨í‚· ì „ì†¡
        }
    }
}
```
  - í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì˜ ë©”ì„¸ì§€ë¥¼ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì½ìŒ
  - read() : 1 byte ë‹¨ìœ„ë¡œ ì½ìŒ
  - readLine() : ë¼ì¸ ë‹¨ìœ„ë¡œ Stringìœ¼ë¡œ ì½ìŒ
  - readUTF() : DataInputStreamì„ í†µí•´ String ë‹¨ìœ„ë¡œ ì½ìŒ

5. ì‹¤í–‰ ê²°ê³¼
```
19:24:43.496 [     main] ì†Œì¼“ ì—°ê²°: Socket[addr=localhost/127.0.0.1,port=12345,localport=5285]
19:24:48.519 [     main] read = -1
19:24:48.519 [     main] ì—°ê²° ì¢…ë£Œ
19:24:48.519 [     main] readString = null
19:24:48.519 [     main] java.io.EOFException
19:24:48.519 [     main] ì—°ê²° ì¢…ë£Œ: true
```

6. ì „ì²´ ê³¼ì •
   - í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì ‘ì†
   - í´ë¼ì´ì–¸íŠ¸ëŠ” input.read()ë¡œ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ì½ê¸° ìœ„í•´ ëŒ€ê¸°
   - 1ì´ˆ ë’¤ ì„œë²„ëŠ” ì—°ê²° ì¢…ë£Œ
     + ì„œë²„ì—ì„œ socket.close()ë¥¼ í˜¸ì¶œí•˜ë©´, í´ë¼ì´ì–¸íŠ¸ì— FIN íŒ¨í‚· ì „ì†¡
     + í´ë¼ì´ì–¸íŠ¸ëŠ” FIN íŒ¨í‚·ì„ ë°›ìŒ
     + ì„œë²„ê°€ ì†Œì¼“ì„ ì¢…ë£Œí–ˆë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ë” ì´ìƒ í´ë¼ì´ì–¸íŠ¸ëŠ” ì½ì„ ë°ì´í„°ê°€ ì—†ìŒ
     + FIN íŒ¨í‚·ì„ ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” ë”ëŠ” ì„œë²„ë¥¼ í†µí•´ ì½ì„ ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ì˜ë¯¸ë¡œ -1 (EOF) ë°˜í™˜

   - ìƒí™©ì— ë”°ë¼ EOF í•´ì„ ë°©ë²•ì˜ ì°¨ì´
     + read() : -1 (EOF ì˜ë¯¸ë¥¼ ìˆ«ìë¡œ -1ë¡œ ë°˜í™˜)
     + BurredReader().readLine() : null (BufferedReader()ëŠ” ë¬¸ì Stringì„ ë°˜í™˜í•˜ë©°, -1ì„ í‘œí˜„í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ null ë°˜í™˜)
     + DataInputStream.readUTF() : EOFException (DataInputStreamì˜ ê²½ìš°, EOFExceptionì„ ë˜ì§€ë©°, ì˜ˆì™¸ë¥¼ í†µí•´ ì—°ê²°ì„ ì¢…ë£Œí•  ìˆ˜ ìˆëŠ” ë°©ë²• ì œê³µ)

   - ğŸ’¡ ì¦‰, EOFê°€ ë°œìƒí•˜ë©´ ìƒëŒ€ë°©ì´ FIN ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ë©´ì„œ ì†Œì¼“ì„ ì—°ê²°ì„ ëŠì—ˆë‹¤ëŠ” ê²ƒ
   - ì´ ê²½ìš°, ì†Œì¼“ì— ë‹¤ë¥¸ ì‘ì—…ì„ í•˜ë©´ ì•ˆë˜ê³ , FIN ë©”ì„¸ì§€ë¥¼ ë°›ì€ í´ë¼ì´ì–¸íŠ¸ë„ close()ë¥¼ í˜¸ì¶œí•´ ìƒëŒ€ë°©ì— FIN ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê³ , ì†Œì¼“ ì—°ê²°ì„ ëŠì–´ì•¼ í•¨
   - ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨, ì„œë¡œ FIN ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ìœ¼ë©° TCP ì—°ê²° ì •ìƒ ì¢…ë£Œ
