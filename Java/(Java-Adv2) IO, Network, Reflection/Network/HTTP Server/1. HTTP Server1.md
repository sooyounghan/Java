-----
### HTTP ì„œë²„1 - ì‹œì‘
-----
1. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì„œë²„ì— ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ HTMLì„ ì‘ë‹µ
```java
<h1> Hello World </h1>
```
<h1> Hello World </h1>

2. ì°¸ê³  : HTMLì€ ```<html>, <head>, <body>```ì™€ ê°™ì€ ê¸°ë³¸ íƒœê·¸ë¥¼ ê°€ì§

3. HttpServerV1 (/was/v1)
```java
package was.v1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.nio.charset.StandardCharsets;

import static util.MyLogger.log;

public class HttpServerV1 {
    private final int port;

    public HttpServerV1(int port) {
        this.port = port;
    }

    public void start() throws IOException {
        ServerSocket serverSocket = new ServerSocket(port);
        log("ì„œë²„ ì‹œì‘ PORT : " + port);

        while (true) {
            Socket socket = serverSocket.accept();
            process(socket);
        }
    }

    private void process(Socket socket) throws IOException {
        try (socket;
             BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream(), StandardCharsets.UTF_8)); // í•œ ì¤„ ì½ê¸° í¸ë¦¬ 
             PrintWriter writer = new PrintWriter(socket.getOutputStream(), false, StandardCharsets.UTF_8)) { // Writer ê¸°ëŠ¥ ìš©

            StringBuilder sb = new StringBuilder();
            String line;

            String requestString = requestToString(reader, sb);

            // GET /favicon.ico HTTP/1.1
            if(requestString.contains(("/favicon.ico"))) { // Favicon ìš”ì²­
                log("favicon ìš”ì²­");
                return;
            }
            
            log("HTTP ìš”ì²­ ì •ë³´ ì¶œë ¥");
            System.out.println("requestString = " + requestString);
            
            log("HTTP ì‘ë‹µ ìƒì„±ì¤‘ ...");
            getResponseToClient(writer);
        }
    }

    private static void getResponseToClient(PrintWriter writer) {
        // ì›¹ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•˜ëŠ” ë‚´ìš©
        
        String body = "<h1>Hello World</h1>";

        int length = body.getBytes(StandardCharsets.UTF_8).length; // Byte í¬ê¸°

        StringBuilder sb = new StringBuilder();
        sb.append("HTTP/1.1 200 OK\r\n"); // Start-Line
        sb.append("Content-Type: text/html\r\n");
        sb.append("Content-Length: ").append(length).append("\r\n");
        sb.append("\r\n"); // CRLF (Header, Body êµ¬ë¶„ ë¼ì¸)
        sb.append(body);
        
        
        log("HTTP ì‘ë‹µ ì •ë³´ ì¶œë ¥");
        sleep(5000); // 5ì´ˆê°„ ëŒ€ê¸°
        System.out.println(sb); // Body

        writer.println(sb); // Bufferì— ì €ì¥ (Autoflush : false)
        writer.flush(); // Buffer ë‚´ìš© ì „ì†¡

        log("HTTP ì‘ë‹µ ì •ë³´ ì™„ë£Œ");
    }


    private static String requestToString(BufferedReader reader, StringBuilder sb) throws IOException {
        String line;
        while ((line = reader.readLine()) != null) { // readLine() : ê°œí–‰ ì‚­ì œ
            if(line.isEmpty()) {
                break;
            }
            sb.append(line).append("\n");  // ê°œí–‰ ì¶”ê°€
        }
        
        return sb.toString();
    }


    private static void sleep(int millis) {
        try {
            Thread.sleep(millis);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    }
}
```

  - HTTP ë©”ì„¸ì§€ ì£¼ìš” ë‚´ìš©ë“¤ì€ ë¬¸ìë¡œ ì½ê³  ì“°ê²Œ ë¨
  - ë”°ë¼ì„œ, BufferedReader, PrinterWriter ì‚¬ìš©
  - ğŸ’¡ Streamì„ Reader, Writerë¥¼ ë³€ê²½í•  ë•Œ í•­ìƒ ì¸ì½”ë”© í™•ì¸

4. ğŸ’¡ AutoFlush : ```new PrintWriter(socket.getOutputStream(), false, StandardCharsets.UTF_8))```
   - PrinterWriter ë‘ ë²ˆì§¸ ì¸ì : autoFlush ì—¬ë¶€
   - ì´ ê°’ì„ trueë¡œ ì„¤ì •í•˜ë©´ println()ìœ¼ë¡œ ì¶œë ¥í•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ Flush (ì²« ë‚´ìš©ì„ ë¹ ë¥´ê²Œ ì „ì†¡í•  ìˆ˜ ìˆì§€ë§Œ, ë„¤íŠ¸ì›Œí¬ ì „ì†¡ì´ ìì£¼ ë°œìƒ)
   - ì´ ê°’ì„ falseë¡œ ì„¤ì •í•˜ë©´ flush()ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì£¼ì–´ì•¼ ë°ì´í„° ì „ì†¡ (ë°ì´í„°ë¥¼ ëª¨ì•„ì„œ ì „ì†¡í•˜ë¯€ë¡œ, ë„¤íŠ¸ì›Œí¬ ì „ì†¡ íšŸìˆ˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŒ / í•œ ë²ˆì— ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ë‹´ì•„ ì „ì†¡ ê°€ëŠ¥)
   - ì—¬ê¸°ì„œëŠ” falseë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ ë§ˆì§€ë§‰ì— ê¼­ writer.flush() í˜¸ì¶œ

5. requestToString()
   - HTTP ìš”ì²­ì„ ì½ì–´ì„œ Stringìœ¼ë¡œ ë°˜í™˜
   - HTTP ìš”ì²­ì˜ ì‹œì‘ ë¼ì¸, í—¤ë”ê¹Œì§€ ì½ìŒ
     + line.isEmpty()ì´ë©´, HTTP ë©”ì„¸ì§€ í—¤ë”ì˜ ë§ˆì§€ë§‰ìœ¼ë¡œ ì¸ì‹í•˜ê³  ë©”ì„¸ì§€ ì½ê¸° ì¢…ë£Œ
     + HTTP ë©”ì„¸ì§€ í—¤ë”ì˜ ëì€ ë¹ˆ ë¼ì¸ìœ¼ë¡œ êµ¬ë¶„ ê°€ëŠ¥ (ë¹ˆ ë¼ì¸ ì´í›„ì—ëŠ” ë©”ì„¸ì§€ ë°”ë””ê°€ ë‚˜ì˜´)
     + ì—¬ê¸°ì„œëŠ” ë©”ì„¸ì§€ ë°”ë””ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ë©”ì„¸ì§€ ë°”ë”” ì •ë³´ ì½ì§€ ì•ŠìŒ

6. /favicon.ico : ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í•´ë‹¹ ì‚¬ì´íŠ¸ì˜ ì‘ì€ ì•„ì´ì½˜ ìš”ì²­í•  ìˆ˜ ìˆìŒ (ì—¬ê¸°ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¬´ì‹œ)
7. sleep(5000) : ì„œë²„ ì²˜ë¦¬ ì‹œê°„ (ë‹¨ìˆœí•´ì„œ ì‘ë‹µì´ ë¹ ë¥´ë¯€ë¡œ, ì„œë²„ì—ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ”ë° ì•½ 5ì´ˆì˜ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ê³  ê°€ì •)
8. responseToClient() : HTTP ì‘ë‹µ ë©”ì„¸ì§€ë¥¼ ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬
   - ì‹œì‘ë¼ì¸, í—¤ë”, HTTP ë©”ì„¸ì§€ ë°”ë”” ì „ë‹¬
   - HTTP ë©”ì„¸ì§€ ê³µì‹ ìŠ¤í™ì—ì„œ ë‹¤ìŒ ë¼ì¸ì€ \r\n(Carriage Return + Line Peed)ë¡œ í‘œí˜„ (ì°¸ê³ ë¡œ, \në§Œ ì‚¬ìš©í•´ë„ ëŒ€ë¶€ë¶„ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë¬¸ì œ ì—†ì´ ì‘ë™)
   - ë§ˆì§€ë§‰ì— writer. flush()ë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„° ì „ì†¡

9. ServerMain
```java
package was.v1;

import java.io.IOException;

public class ServerMain {
    private static final int PORT = 12345;

    public static void main(String[] args) throws IOException {
        HttpServerV1 serverV1 = new HttpServerV1(PORT);
        serverV1.start();
    }
}
```
  - ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ì‚¬ì´íŠ¸ ì ‘ì†
  - ```http://localhost:12345```
  - ```http://127.0.0.1:12345```
  - í¬ë¡¬ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ë²„íŠ¼ - ì†ŒìŠ¤ ë³´ê¸°
```html
<h1>Hello World</h1>
```

  - ì‹¤í–‰ ê²°ê³¼
```
17:11:02.820 [     main] ì„œë²„ ì‹œì‘ PORT : 12345
17:11:18.204 [     main] HTTP ìš”ì²­ ì •ë³´ ì¶œë ¥
requestString = GET / HTTP/1.1
Host: localhost:12345
Connection: keep-alive
sec-ch-ua: "Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: "Windows"
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Sec-Fetch-Site: none
Sec-Fetch-Mode: navigate
Sec-Fetch-User: ?1
Sec-Fetch-Dest: document
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: ko,en-US;q=0.9,en;q=0.8

17:11:18.205 [     main] HTTP ì‘ë‹µ ìƒì„±ì¤‘ ...
17:11:18.206 [     main] HTTP ì‘ë‹µ ì •ë³´ ì¶œë ¥
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 20

<h1>Hello World</h1>
17:11:23.208 [     main] HTTP ì‘ë‹µ ì •ë³´ ì™„ë£Œ
17:11:23.314 [     main] favicon ìš”ì²­
17:11:23.319 [     main] favicon ìš”ì²­
```

  - HTTP ìš”ì²­ ë©”ì„¸ì§€
```
GET / HTTP/1.1
Host: localhost:12345
Connection: keep-alive
sec-ch-ua: "Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"
sec-ch-ua-mobile: ?0
sec-ch-ua-platform: "Windows"
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
```
  - ```http://localhost:12345```ë¥¼ ìš”ì²­í•˜ë©´ ì›¹ ë¸Œë¼ìš°ì €ê°€ HTTP ìš”ì²­ ë©”ì„¸ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ì„œë²„ì— ì „ë‹¬

10. ì‹œì‘ ë¼ì¸
    - GET : GET ë©”ì„¸ì§€ (ì¡°íšŒ)
    - /  : ìš”ì²­ ê²½ë¡œ, ë³„ë„ì˜ ìš”ì²­ ê²½ë¡œê°€ ì—†ìœ¼ë©´ / ì‚¬ìš©
    - HTTP/1.1 : HTTP ë²„ì „

11. í—¤ë”
    - Host : ì ‘ì†í•˜ëŠ” ì„œë²„ ì •ë³´
    - User-Agent : ì›¹ ë¸Œë¼ìš°ì € ì •ë³´
    - Accept : ì›¹ ë¸Œë¼ìš°ì €ê°€ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆëŠ” HTTP ì‘ë‹µ ë©”ì„¸ì§€ ë°”ë”” í˜•íƒœ
    - Accept-Encoding : ì›¹ ë¸Œë¼ìš°ì €ê°€ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆëŠ” ì¸ì½”ë”© í˜•íƒœ
    - Accept-Language : ì›¹ ë¸Œë¼ìš°ì €ê°€ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆëŠ” ì–¸ì–´ í˜•íƒœ

12. HTTP ì‘ë‹µ ë©”ì„¸ì§€
```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 20

<h1>Hello World</h1>
```

13. ì‹œì‘ ë¼ì¸
    - HTTP/1.1 : HTTP ë²„ì „
    - 200 : ì„±ê³µ
    - OK : 200ì— ëŒ€í•œ ì„¤ëª…

14. í—¤ë”
    - Content-Type : HTTP ë©”ì„¸ì§€ ë°”ë””ì˜ ë°ì´í„° í˜•íƒœ (ì—¬ê¸°ì„œëŠ” HTML ì‚¬ìš©)
    - Content-Length : HTTP ë©”ì„¸ì§€ ë°”ë””ì˜ ë°ì´í„° ê¸¸ì´

15. ë°”ë”” : ```<h1>Hello World</h1>```

16. ë¬¸ì œ
  - ì„œë²„ëŠ” ë™ì‹œì— ìˆ˜ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•¨
  - í˜„ì¬ ì„œë²„ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œ
  - ë‹¤ë¥¸ ì›¹ ë¸Œë¼ìš°ì € 2ê°œë¥¼ ë™ì‹œì— ì—´ì–´ì„œ ì‚¬ì´íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´(ì˜ˆ) í¬ë¡¬ / ì—£ì§€/ ì‚¬íŒŒë¦¬ ë“± ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ í™•ì‹¤í•œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥), ì²« ë²ˆì§¸ ìš”ì²­ì´ ëª¨ë‘ ì²˜ë¦¬ë˜ê³  ë‚œ í›„, ë‘ ë²ˆì§¸ ìš”ì²­ì´ ì²˜ë¦¬ë˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥

