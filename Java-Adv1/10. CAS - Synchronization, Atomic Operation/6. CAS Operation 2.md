-----
### CAS ì—°ì‚° 2
-----
1. ì–´ë–¤ ê°’ì„ ì¦ê°€í•˜ëŠ” i++ ì—°ì‚°ì€ ì›ìì  ì—°ì‚°ì´ ì•„ë‹˜ (ë‹¤ìŒ ì—°ì‚°ê³¼ ê°™ìŒ)
```java
i = i + 1;
```
  - iì˜ ì´ˆê¸°ê°’ì€ 0ìœ¼ë¡œ ê°€ì •
  - ì˜¤ë¥¸ìª½ì— ìˆëŠ” iì˜ ê°’ì„ ì½ìŒ (i = 0)
  - ì½ì€ 0ì— 1ì„ ë”í•´ì„œ 1ì„ ë§Œë“¬
  - ë”í•œ 1ì„ ì™¼ìª½ì˜ i ë³€ìˆ˜ì— ëŒ€ì…

2. ì˜¤ë¥¸ìª½ì— ìˆëŠ” iì˜ ê°’ì„ ì½ìŒ (i = 0)ì™€ ë”í•œ 1ì„ ì™¼ìª½ì˜ i ë³€ìˆ˜ì— ëŒ€ì… ì—°ì‚° ì‚¬ì´ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ iì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
   - ë”°ë¼ì„œ, i++ ì—°ì‚°ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ì‚¬ìš©í•œë‹¤ë©´, ë½ì„ ê±´ ë‹¤ìŒ ê°’ì„ ì¦ê°€í•´ì•¼ í•¨

3. CAS ì—°ì‚°ì„ í™œìš©í•´ ë½ ì—†ì´ ê°’ì„ ì¦ê°€í•˜ëŠ” ê¸°ëŠ¥
   - AtomicIntegerê°€ ì œê³µí•˜ëŠ” incrementAndGet() ë©”ì„œë“œê°€ CAS ì—°ì‚°ì„ í™œìš©í•´ ë½ ì—†ì´ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ ì§ì ‘ êµ¬í˜„
   - CasMainV2
```java
package thread.cas;

import java.util.concurrent.atomic.AtomicInteger;

import static thread.util.MyLogger.log;

public class CasMainV2 {
    public static void main(String[] args) {
        AtomicInteger atomicInteger = new AtomicInteger();
        System.out.println("Start value = " + atomicInteger.get());

        // incrementAndGet êµ¬í˜„
        int resultValue1 = incrementAndGet(atomicInteger);
        System.out.println("resultValue1 = " + resultValue1);

        int resultValue2 = incrementAndGet(atomicInteger);
        System.out.println("resultValue2 = " + resultValue2);
    }

    private static int incrementAndGet(AtomicInteger atomicInteger) {
        int getValue;
        boolean result;
        
        do {
            getValue = atomicInteger.get(); // í˜„ì¬ ê°’ì„ ì½ìŒ (ì˜ˆ) 1. thread1 : 0 -> 3-1. thread1 : 1)
            log("getValue = " + getValue);
            
            result = atomicInteger.compareAndSet(getValue, getValue + 1);// 2. ê·¸ ê°’ì„ Updateí•˜ëŠ” ì‹œì ì—, ì½ì€ ê°’ê³¼ getValueê°€ ê°™ë‹¤ë©´ CAS ì—°ì‚°ì„ í†µí•´ í•˜ë‚˜ ì¦ê°€ (0ì¼ ë•Œë§Œ ì¦ê°€) (thread1: 1)
            // 3. if, thread2ê°€ value -> 1ë¡œ ì„¤ì •í•´ë²„ë¦°ë‹¤ë©´ falseê°€ ë˜ì–´ë²„ë¦¬ë¯€ë¡œ ë°˜ë³µë¬¸ ë‹¤ì‹œ ì‹¤í–‰
            // 3-2. ì´ ë•ŒëŠ” ì°¸ì´ ë˜ë¯€ë¡œ thread1 : 2
            log("result = " + result);
        } while (!result);
        
        return getValue + 1;
    }

}
```
  - incrementAndGet() : atomicInteger ë‚´ë¶€ value ê°’ì„ í•˜ë‚˜ ì¦ê°€ì‹œí‚¤ëŠ” ë©”ì„œë“œ
  - CAS ì—°ì‚°ì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê°™ì€ ê°’ì„ ì‚¬ìš©í•˜ëŠ” ìƒí™©ì—ì„œë„ ë½ì„ ê±¸ì§€ ì•Šê³ , ì•ˆì „í•˜ê²Œ ê°’ ì¦ê°€ ê°€ëŠ¥
  - ì—¬ê¸°ì„œëŠ” ë½ì„ ê±¸ì§€ ì•Šê³  CAS ì—°ì‚°ì„ ì‚¬ìš©í•´ ê°’ ì¦ê°€
    + getValue = atomicInteger.get() : value ê°’ì„ ì–»ìŒ
    + ğŸ’¡ compareAndSet(getValue, getValue + 1) : ë°©ê¸ˆ ì½ì€ value ê°’ì´ ë©”ëª¨ë¦¬ì˜ value ê°’ê³¼ ê°™ë‹¤ë©´, value ê°’ì„ í•˜ë‚˜ ì¦ê°€ (CAS ì—°ì‚° ì‚¬ìš©)
    + ë§Œì•½ CAS ì—°ì‚°ì´ ì„±ê³µí•˜ë©´ true ë°˜í™˜ í›„, do - whileë¬¸ íƒˆì¶œ
    + ë§Œì•½ CAS ì—°ì‚°ì´ ì‹¤íŒ¨í•˜ë©´, false ë°˜í™˜ í›„, do - whileë¬¸ ì¬ì‹œì‘

  - ì‹¤í–‰ ê²°ê³¼
```
Start value = 0
20:21:08.260 [     main] getValue = 0
20:21:08.263 [     main] result = true
resultValue1 = 1
20:21:08.264 [     main] getValue = 1
20:21:08.264 [     main] result = true
resultValue2 = 2
```

4. incrementAndGet ì²« ë²ˆì§¸ ì‹¤í–‰
   - atomicInteger.get() : value ê°’ì„ ì–»ìŒ (getValue = 0)
   - compareAndSet(0, 1) ìˆ˜í–‰ : compareAndSet(getValue, getValue + 1)
   - CAS ì—°ì‚°ì´ ì„±ê³µí–ˆìœ¼ë¯€ë¡œ, value ê°’ì€ 0ì—ì„œ 1ë¡œ ì¦ê°€í•˜ê³  true ë°˜í™˜
   - do - whileë¬¸ íƒˆì¶œ

4. incrementAndGet ë‘ ë²ˆì§¸ ì‹¤í–‰
   - atomicInteger.get() : value ê°’ì„ ì–»ìŒ (getValue = 1)
   - compareAndSet(1, 2) ìˆ˜í–‰ : compareAndSet(getValue, getValue + 1)
   - CAS ì—°ì‚°ì´ ì„±ê³µí–ˆìœ¼ë¯€ë¡œ, value ê°’ì€ 1ì—ì„œ 2ë¡œ ì¦ê°€í•˜ê³  true ë°˜í™˜
   - do - whileë¬¸ íƒˆì¶œ

5. main ìŠ¤ë ˆë“œ í•˜ë‚˜ë¡œ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— CAS ì—°ì‚°ì´ ì‹¤íŒ¨í•˜ëŠ” ìƒí™©ì„ ë³¼ ìˆ˜ ì—†ìŒ
   - ê¸°ëŒ€í•˜ëŠ” ì‹¤íŒ¨í•˜ëŠ” ìƒí™©ì€ ì—°ì‚°ì˜ ì¤‘ê°„ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ê°’ì„ ë³€ê²½í•´ë²„ë¦¬ëŠ” ê²ƒ
   
