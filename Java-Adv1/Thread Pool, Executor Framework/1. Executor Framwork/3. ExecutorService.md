-----
### ExecutorService ì½”ë“œë¡œ ì‹œì‘í•˜ê¸°
-----
1. 1ì´ˆê°„ ëŒ€ê¸°í•˜ëŠ” ê°„ë‹¨í•œ ì‘ì—… ìƒì„± - RunnableTask
```java
package thread.executor;

import static thread.util.MyLogger.log;
import static thread.util.ThreadUtils.sleep;

public class RunnableTask implements Runnable {
    
    private final String name;
    private int sleepMs = 1000;

    public RunnableTask(String name) {
        this.name = name;
    }

    public RunnableTask(String name, int sleepMs) {
        this.name = name;
        this.sleepMs = sleepMs;
    }

    @Override
    public void run() {
        log(name + " ì‹œì‘");
        sleep(sleepMs); // ì‘ì—… ì‹œê°„ ì‹œë®¬ë ˆì´ì…˜
        log(name + " ì™„ë£Œ");
    }
}
```
  - Runnable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ (1ì´ˆì˜ ì‘ì—…ì´ ê±¸ë¦¬ëŠ” ê°„ë‹¨í•œ ì‘ì—… ê°€ì •)

2. ExecutorBasicMain
```java
package thread.executor;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import static thread.executor.ExecutorUtils.*;
import static thread.util.MyLogger.log;
import static thread.util.ThreadUtils.sleep;

public class ExecutorBasicMain {
    public static void main(String[] args) {
        // ThreadPoolExecutor(corePoolSize, maximumPoolSize, keepAliveTime, TimeUnit, BlockingQueue)
        ExecutorService es = new ThreadPoolExecutor(2, 2, 0, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<>());

        log("== ì´ˆê¸° ìƒíƒœ ==");
        printState(es); // ExecutorUtils

        // ì‘ì—…ì´ ë“¤ì–´ì™€ì„œ ì‹¤í–‰ë˜ì–´ì•¼ ê·¸ ì‹œì ì—ì„œ ìŠ¤ë ˆë“œ ìƒì„±, ì´í›„ ì¬ì‚¬ìš©
        es.execute(new RunnableTask("TaskA"));
        es.execute(new RunnableTask("TaskB"));
        es.execute(new RunnableTask("TaskC"));
        es.execute(new RunnableTask("TaskD"));

        log("== ì‘ì—… ìˆ˜í–‰ ì¤‘ ==");
        printState(es);

        sleep(3000);

        log("== ì‘ì—… ìˆ˜í–‰ ì™„ë£Œ==");
        printState(es);

        es.close(); // ìŠ¤ë ˆë“œ í’€ ì¢…ë£Œ
        log("== shutdown ì™„ë£Œ ==");
        printState(es);
    }
}
```
  - ExecutorServiceì˜ ê°€ì¥ ëŒ€í‘œì  êµ¬í˜„ì²´ : ThreadPoolExecutor

<div align="center">
<img src="https://github.com/user-attachments/assets/167a6503-e990-4828-a0b0-44ac57953d55">
</div>

  - ThreadPoolExecutor(ExecutorService)ëŠ” í¬ê²Œ 2ê°€ì§€ ìš”ì†Œë¡œ êµ¬ì„±
    + ìŠ¤ë ˆë“œ í’€ : ìŠ¤ë ˆë“œ ê´€ë¦¬
    + BlockingQueue : ì‘ì—…ì„ ë³´ê´€ (ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë‹¨ìˆœ íê°€ ì•„ë‹Œ, BlockingQueueë¥¼ ì‚¬ìš©)

  - ìƒì‚°ìê°€ es.execute(new RunnableTask("taskA"))ë¥¼ í˜¸ì¶œí•˜ë©´, RunnableTask("taskA") ì¸ìŠ¤í„´ìŠ¤ê°€ BlockingQueueì— ë³´ê´€
     + ìƒì‚°ì : es.execute(ì‘ì—…)ë¥¼ í˜¸ì¶œí•˜ë©´ ë‚´ë¶€ì—ì„œ BlockingQueueì— ì‘ì—…ì„ ë³´ê´€ (main ìŠ¤ë ˆë“œê°€ ìƒì‚°ì)
     + ì†Œë¹„ì : ìŠ¤ë ˆë“œ í’€ì— ìˆëŠ” ìŠ¤ë ˆë“œê°€ ì†Œë¹„ì, ì´í›„ì— ì†Œë¹„ì ì¤‘ì— í•˜ë‚˜ê°€ BlockingQueueì— ë“¤ì–´ìˆëŠ” ì‘ì—…ì„ ë°›ì•„ì„œ ì²˜ë¦¬

  - ThreadPoolExecutor ìƒì„±ì : ThreadPoolExecutorì˜ ìƒì„±ìëŠ” ë‹¤ìŒ ì†ì„±ì„ ì‚¬ìš©
     + corePoolSize : ìŠ¤ë ˆë“œ í’€ì—ì„œ ê´€ë¦¬ë˜ëŠ” ê¸°ë³¸ ìŠ¤ë ˆë“œì˜ ìˆ˜
     + maximumPoolSize : ìŠ¤ë ˆë“œ í’€ì—ì„œ ê´€ë¦¬ë˜ëŠ” ìµœëŒ€ ìŠ¤ë ˆë“œ ìˆ˜
     + keepAliveTime, TimeUnit unit : ê¸°ë³¸ ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ì´ˆê³¼í•´ì„œ ë§Œë“¤ì–´ì§„ ìŠ¤ë ˆë“œê°€ ìƒì¡´í•  ìˆ˜ ìˆëŠ” ëŒ€ê¸° ì‹œê°„ìœ¼ë¡œ, ì´ ì‹œê°„ ë™ì•ˆ ì²˜ë¦¬í•  ì‘ì—…ì´ ì—†ë‹¤ë©´ ì´ˆê³¼ ìŠ¤ë ˆë“œëŠ” ì œê±°
     + BlockingQueue workQueue : ì‘ì—…ì„ ë³´ê´€í•  ë¸”ë¡œí‚¹ í
    
  - new ThreadPoolExecutor(2, 2, 0, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<>());
     + corePoolSize = 2, maximumPoolSize=2ë¥¼ ì‚¬ìš©í•´ì„œ ê¸°ë³¸ ìŠ¤ë ˆë“œì™€ ìµœëŒ€ ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ë§ì¶”ì—ˆìœ¼ë¯€ë¡œ, ë”°ë¼ì„œ í’€ì—ì„œ ê´€ë¦¬ë˜ëŠ” ìŠ¤ë ˆë“œëŠ” 2ê°œë¡œ ê³ ì •
     + keepAliveTime, TimeUnit unit ëŠ” 0ìœ¼ë¡œ ì„¤ì •
     + ì‘ì—…ì„ ë³´ê´€í•  ë¸”ë¡œí‚¹ íì˜ êµ¬í˜„ì²´ë¡œ LinkedBlockingQueueë¥¼ ì‚¬ìš© (ì´ ë¸”ë¡œí‚¹ íëŠ” ì‘ì—…ì„ ë¬´í•œëŒ€ë¡œ ì €ì¥ ê°€ëŠ¥)

  - ì‹¤í–‰ ê²°ê³¼
```
17:41:36.245 [     main] == ì´ˆê¸° ìƒíƒœ ==
17:41:36.264 [     main] [pool = 0, active = 0, queuedTasks = 0, completedTask = 0]
17:41:36.265 [     main] == ì‘ì—… ìˆ˜í–‰ ì¤‘ ==
17:41:36.266 [pool-1-thread-1] TaskA ì‹œì‘
17:41:36.266 [pool-1-thread-2] TaskB ì‹œì‘
17:41:36.266 [     main] [pool = 2, active = 2, queuedTasks = 2, completedTask = 0]
17:41:37.280 [pool-1-thread-2] TaskB ì™„ë£Œ
17:41:37.280 [pool-1-thread-1] TaskA ì™„ë£Œ
17:41:37.280 [pool-1-thread-2] TaskC ì‹œì‘
17:41:37.280 [pool-1-thread-1] TaskD ì‹œì‘
17:41:38.288 [pool-1-thread-2] TaskC ì™„ë£Œ
17:41:38.288 [pool-1-thread-1] TaskD ì™„ë£Œ
17:41:39.282 [     main] == ì‘ì—… ìˆ˜í–‰ ì™„ë£Œ==
17:41:39.282 [     main] [pool = 2, active = 0, queuedTasks = 0, completedTask = 4]
17:41:39.283 [     main] == shutdown ì™„ë£Œ ==
17:41:39.283 [     main] [pool = 0, active = 0, queuedTasks = 0, completedTask = 4]
```

3. ì‹¤í–‰ ê³¼ì • ê·¸ë¦¼ ë¶„ì„
<div align="center">
<img src="https://github.com/user-attachments/assets/deef2c50-e894-47c6-991e-94ac6474cdb2">
</div>

```
17:41:36.245 [     main] == ì´ˆê¸° ìƒíƒœ ==
17:41:36.264 [     main] [pool = 0, active = 0, queuedTasks = 0, completedTask = 0]
```
  - ğŸ’¡ ThreadPoolExecutor ë¥¼ ìƒì„±í•œ ì‹œì ì— ìŠ¤ë ˆë“œ í’€ì— ìŠ¤ë ˆë“œë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ì§€ëŠ” ì•ŠìŒ

<div align="center">
<img src="https://github.com/user-attachments/assets/3d047b8c-6e75-473a-83a8-21d354a2f437">
</div>

  - main ìŠ¤ë ˆë“œê°€ es.execute("taskA ~ taskD") í˜¸ì¶œ
    + main ìŠ¤ë ˆë“œëŠ” ì‘ì—…ì„ ì „ë‹¬í•˜ê³  ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ, ì „ë‹¹í•œ ì‘ì—…ì€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•  ê²ƒ
    + main ìŠ¤ë ˆë“œëŠ” ì‘ì—…ì„ íì— ë³´ê´€ê¹Œì§€ë§Œ í•˜ê³  ë°”ë¡œ ë‹¤ìŒ ì½”ë“œ ìˆ˜í–‰

  - taskA ~ taskD ìš”ì²­ì´ ë¸”ë¡œí‚¹ íì— ë“¤ì–´ì˜´
  - ğŸ’¡ ìµœì´ˆ ì‘ì—…ì´ ë“¤ì–´ì˜¤ë©´ ì´ ë•Œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìŠ¤ë ˆë“œ ìƒì„± (ìŠ¤ë ˆë“œ í’€ì— ìŠ¤ë ˆë“œë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì§€ ì•ŠìŒ)
  - ì‘ì—…ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤, corePoolSizeì˜ í¬ê¸°ê¹Œì§€ ìŠ¤ë ˆë“œ ìƒì„±
    + ì˜ˆë¥¼ ë“¤ì–´, ìµœì´ˆ ì‘ì—…ì¸ taskAê°€ ë“¤ì–´ì˜¤ëŠ” ì‹œì ì— ìŠ¤ë ˆë“œ 1 ìƒì„±, ë‹¤ìŒ ì‘ì—…ì¸ taskBê°€ ë“¤ì–´ì˜¤ëŠ” ì‹œì ì— ìŠ¤ë ˆë“œ 2 ìƒì„±
    + ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ corePoolSizeì— ì§€ì •í•œ ìˆ˜ë§Œí¼ ìŠ¤ë ˆë“œë¥¼ ìŠ¤ë ˆë“œ í’€ì— ìƒì„± (ì—¬ê¸°ì„œëŠ” 2ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ 2ê°œê¹Œì§€ ë§Œë“¬)
    + corePoolSizeê¹Œì§€ ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ê³  ë‚˜ë©´, ì´í›„ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ì•ì„œ ë§Œë“  ìŠ¤ë ˆë“œ ì¬ì‚¬ìš©

<div align="center">
<img src="https://github.com/user-attachments/assets/d3ccd816-0f02-46bd-a9be-d5ed229d61e6">
</div>

```
17:41:36.265 [     main] == ì‘ì—… ìˆ˜í–‰ ì¤‘ ==
17:41:36.266 [     main] [pool = 2, active = 2, queuedTasks = 2, completedTask = 0]
```
  - ìŠ¤ë ˆë“œ í’€ì— ê´€ë¦¬ëŠ” ìŠ¤ë ˆë“œê°€ 2ê°œì´ë¯€ë¡œ pool = 2
  - ì‘ì—…ì„ ìˆ˜í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œê°€ 2ê°œì´ë¯€ë¡œ active = 2
  - íì— ëŒ€ê¸°ì¤‘ì¸ ì‘ì—…ì´ 2ê°œì´ë¯€ë¡œ queueTasks = 2
  - ì™„ë£Œëœ ì‘ì—…ì€ ì—†ìœ¼ë¯€ë¡œ completedTasks = 0
  - ìŠ¤ë ˆë“œë¥¼ ì‹¤ì œë¡œ êº¼ë‚´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìŠ¤ë ˆë“¤ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê²ƒ (ë”°ë¼ì„œ pool = 2)

<div align="center">
<img src="https://github.com/user-attachments/assets/23b7527b-979e-49db-8053-9db2a8584d62">
</div>

  - ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ìŠ¤ë ˆë“œ í’€ì— ìˆëŠ” ìŠ¤ë ˆë“œ ë°˜ë‚©
  - ìŠ¤ë ˆë“œë¥¼ ë°˜ë‚©í•˜ë©´ ìŠ¤ë ˆë“œëŠ” ëŒ€ê¸°(WAITING) ìƒíƒœë¡œ ìŠ¤ë ˆë“œ í’€ì— ëŒ€ê¸° (ì‹¤ì œ ë°˜ë‚©ì´ ì•„ë‹Œ, ìŠ¤ë ˆë“œ ìƒíƒœ ë³€ê²½)

<div align="center">
<img src="https://github.com/user-attachments/assets/b8abded6-3203-428b-903f-8328c9d962f6">
</div>

  - ë°˜ë‚©ëœ ìŠ¤ë ˆë“œëŠ” ì¬ì‚¬ìš©

<div align="center">
<img src="https://github.com/user-attachments/assets/60fd0e15-8e66-4687-a04e-590df7a2b7d1">
</div>

  - taskC, taskDì˜ ì‘ì—… ì²˜ë¦¬ë¥¼ ìœ„í•´ ìŠ¤ë ˆë“œ í’€ì—ì„œ ìŠ¤ë ˆë“œë¥¼ êº¼ë‚´ ì¬ì‚¬ìš©

<div align="center">
<img src="https://github.com/user-attachments/assets/6369984c-d384-4bb8-a0f8-7e4dfb7b51aa">
</div>

  - ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ìŠ¤ë ˆë“œëŠ” ë‹¤ì‹œ ìŠ¤ë ˆë“œ í’€ì—ì„œ ëŒ€ê¸°
```

17:41:39.282 [     main] == ì‘ì—… ìˆ˜í–‰ ì™„ë£Œ==
17:41:39.282 [     main] [pool = 2, active = 0, queuedTasks = 0, completedTask = 4]
```

<div align="center">
<img src="https://github.com/user-attachments/assets/5ef02d71-2abb-4df2-91d2-fb83a04c5a9f">
</div>

```
17:41:39.283 [     main] == shutdown ì™„ë£Œ ==
17:41:39.283 [     main] [pool = 0, active = 0, queuedTasks = 0, completedTask = 4]
```
  - close()ë¥¼ í˜¸ì¶œí•˜ë©´ ThreadPoolExecutorê°€ ì¢…ë£Œ
  - ì´ ë•Œ, ìŠ¤ë ˆë“œ í’€ì—ì„œ ëŒ€ê¸°í•˜ëŠ” ìŠ¤ë ˆë“œë„ í•¨ê»˜ ì œê±°ã…“
  - ì°¸ê³  : close() ëŠ” ìë°” 19ë¶€í„° ì§€ì›ë˜ëŠ” ë©”ì„œë“œë¡œ, ë§Œì•½ 19 ë¯¸ë§Œ ë²„ì „ì„ ì‚¬ìš©í•œë‹¤ë©´ shutdown()ì„ í˜¸ì¶œ
